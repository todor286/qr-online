<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>QR Online</title>
<style>
body { font-family: Arial; padding: 20px; }
</style>
</head>
<body>

<h1>QR Online — Производствени отчети</h1>

<form id="form">
  <label>Проект:</label>
  <input required id="project"><br><br>

  <label>Оператор:</label>
  <input required id="user"><br><br>

  <label>Количество:</label>
  <input type="number" required id="qty"><br><br>

  <button>Запази</button>
</form>

<p id="msg"></p>

<script>
document.getElementById("form").onsubmit = async (e) => {
  e.preventDefault();

  const data = {
    project: document.getElementById("project").value,
    user: document.getElementById("user").value,
    qty: document.getElementById("qty").value,
    time: new Date().toISOString()
  };

  let res = await fetch("/api/records", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(data)
  });

  document.getElementById("msg").innerText = "✔ Записано!";
  e.target.reset();
};
</script>

</body>
</html>
